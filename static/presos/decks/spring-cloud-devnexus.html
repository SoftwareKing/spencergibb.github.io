<!DOCTYPE html>
<!--[if lt IE 7]> <html class="no-js ie6" lang="en"> <![endif]-->
<!--[if IE 7]>    <html class="no-js ie7" lang="en"> <![endif]-->
<!--[if IE 8]>    <html class="no-js ie8" lang="en"> <![endif]-->
<!--[if gt IE 8]><!-->  <html class="no-js" lang="en"> <!--<![endif]-->
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
	
	<title></title>
	
	<meta name="description" content="A jQuery library for modern HTML presentations">
	<meta name="viewport" content="width=1024, user-scalable=no">
	
	<!-- Core and extension CSS files -->
	<link rel="stylesheet" href="../deck.js/core/deck.core.css">
	<link rel="stylesheet" href="../deck.js/extensions/goto/deck.goto.css">
	<link rel="stylesheet" href="../deck.js/extensions/menu/deck.menu.css">
	<link rel="stylesheet" href="../deck.js/extensions/navigation/deck.navigation.css">
	<link rel="stylesheet" href="../deck.js/extensions/status/deck.status.css">
	<link rel="stylesheet" href="../deck.js/extensions/hash/deck.hash.css">
	<link rel="stylesheet" href="../css/syntax.css">
	
	<!-- Theme CSS files (menu swaps these out) -->
    <link rel="stylesheet" href="../font-awesome/css/font-awesome.css">
    
    
	<link rel="stylesheet" id="style-theme-link" href="../themes/style/spring.css">
	<link rel="stylesheet" id="transition-theme-link" href="../deck.js/themes/transition/horizontal-slide.css">
	
	<script src="../deck.js/modernizr.custom.js"></script>
</head>

<body class="deck-container">

<div class="slide" id="slide1"><h1 id="toc_0">Cloud Native Apps with Spring Cloud</h1>

<style>img[alt=spring-cloud] { width: 70%; float: right; }</style>

<p><img src="images/spring-cloud.png" alt="spring-cloud"></p>

<p>Spencer Gibb<br>
twitter: <a href="http://twitter.com/spencerbgibb">@spencerbgibb</a><br>
email: <a href="mailto:sgibb@pivotal.io">sgibb@pivotal.io</a>   </p>

<p>Dave Syer<br>
twitter: <a href="http://twitter.com/david_syer">@david_syer</a><br>
email: <a href="mailto:dsyer@pivotal.io">dsyer@pivotal.io</a>   </p>

</div><div class="slide" id="slide2"><h2 id="toc_1">Pivotal</h2>

<p><img src="images/whatispivotal.png" alt="what-is-pivotal"></p>

</div><div class="slide" id="slide3"><h2 id="toc_2">Cloud Native</h2>

<ul>
<li>Distributed</li>
<li>Automated</li>
<li>Organizational</li>
<li>Anti-fragile</li>
</ul>

<p><em>I like &#39;cloud native&#39; better than microservice. I think its more descriptive and doesn&#39;t have the awkwardness of having &#39;micro&quot; in the name.</em></p>

</div><div class="slide" id="slide4"><h2 id="toc_3">Cloud Native with Spring Boot</h2>

<p>It needs to be super easy to implement and update a service:</p>
<div class="highlight"><pre><code class="groovy language-groovy" data-lang="groovy"><span class="nd">@RestController</span>
<span class="kd">class</span> <span class="nc">ThisWillActuallyRun</span> <span class="o">{</span>
    <span class="nd">@RequestMapping</span><span class="o">(</span><span class="s2">&quot;/&quot;</span><span class="o">)</span>
    <span class="n">String</span> <span class="nf">home</span><span class="o">()</span> <span class="o">{</span>
        <span class="n">Hello</span> <span class="n">World</span><span class="o">!</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div>
</div><div class="slide" id="slide5"><h2 id="toc_4">Example Distributed System: Minified</h2>

<style>img[alt=myfeed-blank] { width: 80%; }</style>

<p><img src="images/myfeed_arch_blank.svg" alt="myfeed-blank"></p>

</div><div class="slide" id="slide6"><h2 id="toc_5">No Man (Microservice) is an Island</h2>

<blockquote>
<p>It&#39;s excellent to be able to implement a microservice really easily
(Spring Boot), but building a system that way surfaces
&quot;non-functional&quot; requirements that you otherwise didn&#39;t have.</p>
</blockquote>

<p>There are laws of physics that make some problems unsolvable
(consistency, latency), but brittleness and manageability can be
addressed with <em>generic</em>, <em>boiler plate</em> patterns.</p>

</div><div class="slide" id="slide7"><h2 id="toc_6">Emergent features of cloud native systems</h2>

<p>Coordination of distributed systems leads to boiler plate patterns</p>

<ul>
<li>Distributed/versioned configuration</li>
<li>Service registration and discovery</li>
<li>Routing</li>
<li>Service-to-service calls</li>
<li>Load balancing</li>
<li>Circuit Breaker</li>
<li>Asynchronous</li>
<li>Distributed messaging</li>
</ul>

</div><div class="slide" id="slide8"><h2 id="toc_7">Spring IO Platform</h2>

<p><img src="images/spring-io-tree.png" alt="spring-io-tree"></p>

</div><div class="slide" id="slide9"><h2 id="toc_8">Example: Coordination Boiler Plate</h2>

<style>img[alt=myfeed-system] { width: 72%; }</style>

<p><img src="images/myfeed_arch_system.svg" alt="myfeed-system"></p>

</div><div class="slide" id="slide10"><h2 id="toc_9">Netflix OSS</h2>

<style>img[alt=Netflix_logo] { width: 60%; float: right; }</style>

<p><img src="images/Netflix_logo.svg" alt="Netflix_logo"></p>

<ul>
<li>Eureka</li>
<li>Hystrix &amp; Turbine</li>
<li>Ribbon</li>
<li>Feign</li>
<li>Zuul</li>
<li><p>Archaius</p></li>
<li><p>Curator</p></li>
<li><p>Asgaard</p></li>
<li><p>...</p></li>
</ul>

</div><div class="slide" id="slide11"><h2 id="toc_10">Example: Spring Cloud and Netflix</h2>

<style>img[alt=myfeed] { width: 72%; }</style>

<p><img src="images/myfeed_arch.svg" alt="myfeed"></p>

</div><div class="slide" id="slide12"><h2 id="toc_11">Configuration Server</h2>

<style>img[alt=gears] { width: 50%; float: right; }</style>

<p><img src="images/gears.svg" alt="gears"></p>

<ul>
<li>Pluggable source</li>
<li>Git implementation

<ul>
<li>Per service repos</li>
</ul></li>
<li>SVN implementation</li>
<li>Versioned</li>
<li>Rollback-able</li>
<li>Configuration client auto-configured via starter</li>
</ul>

</div><div class="slide" id="slide13"><h2 id="toc_12">Discovery: Eureka</h2>

<style>img[alt=eureka] { float: right; }</style>

<p><img src="images/eureka.png" alt="eureka"></p>

<ul>
<li>Service Registration Server</li>
<li>Highly Available</li>
<li>In AWS terms, multi Availability Zone and Region aware</li>
</ul>

<p><a href="http://techblog.netflix.com/2012/09/eureka.html">http://techblog.netflix.com/2012/09/eureka.html</a></p>

</div><div class="slide" id="slide14"><h2 id="toc_13">Client Side Load-balancing: Ribbon</h2>

<style>img[alt=ribbon] { float: right; }</style>

<p><img src="images/ribbon.png" alt="ribbon"></p>

<ul>
<li>Client side load balancer</li>
<li>Pluggable</li>
<li>Round robin, random, weighted response time</li>
</ul>

<p><a href="http://techblog.netflix.com/2013/01/announcing-ribbon-tying-netflix-mid.html">http://techblog.netflix.com/2013/01/announcing-ribbon-tying-netflix-mid.html</a></p>

</div><div class="slide" id="slide15"><h2 id="toc_14">Circuit Breaker: Hystrix</h2>

<style>img[alt=hystrix-logo] { float: right; }</style>

<p><img src="images/hystrix-logo.png" alt="hystrix-logo"></p>

<ul>
<li>latency and fault tolerance</li>
<li>isolates access to other services</li>
<li>stops cascading failures</li>
<li>enables resilience</li>
<li>circuit breaker pattern</li>
<li>dashboard</li>
</ul>

<p><a href="http://techblog.netflix.com/2012/11/hystrix.html">http://techblog.netflix.com/2012/11/hystrix.html</a></p>

</div><div class="slide" id="slide16"><h2 id="toc_15">Hystrix</h2>

<style>img[alt=hystrix] { width: 92%; }</style>

<p><img src="images/HystrixGraph.svg" alt="hystrix"></p>

</div><div class="slide" id="slide17"><h2 id="toc_16">Hystrix Fallback</h2>

<style>img[alt=hystrix] { width: 92%; }</style>

<p><img src="images/HystrixFallback.svg" alt="hystrix"></p>

</div><div class="slide" id="slide18"><h2 id="toc_17">Circuit Breaker Metrics</h2>

<ul>
<li>Via actuator <code>/metrics</code></li>
<li>Server side event stream <code>/hystrix.stream</code>

<ul>
<li>also via rabbitmq</li>
</ul></li>
<li>Dashboard app via <code>@EnableHystrixDashboard</code></li>
</ul>

</div><div class="slide" id="slide19"><h2 id="toc_18">Rx Java</h2>

<style>img[alt=rx-logo] { float: right; }</style>

<p><img src="images/Rx_Logo_M.png" alt="rx-logo"></p>

<ul>
<li>Reactive: push vs. pull</li>
<li>Functional</li>
<li>Composable</li>
<li>Return <code>Observable</code> from Spring MVC Controller (soon)</li>
</ul>
<div class="highlight"><pre><code class="text language-text" data-lang="text">public static void hello(String... names) {
    Observable.from(names).subscribe(s -&gt; {
            System.out.println(&quot;Hello &quot; + s + &quot;!&quot;);
    });
}
</code></pre></div>
<p><a href="http://techblog.netflix.com/2013/02/rxjava-netflix-api.html">http://techblog.netflix.com/2013/02/rxjava-netflix-api.html</a><br>
<a href="https://github.com/ReactiveX/RxJava">https://github.com/ReactiveX/RxJava</a><br>
<a href="http://reactivex.io">http://reactivex.io</a></p>

</div><div class="slide" id="slide20"><h2 id="toc_19">Routing: Zuul</h2>

<style>img[alt=zuul] { float: right; }</style>

<p><img src="images/zuul.png" alt="zuul"></p>

<ul>
<li>JVM based router and filter</li>
<li>Similar routing role as httpd, nginx, or CF go router</li>
<li>Fully programmable rules and filters</li>
<li>Groovy</li>
<li>Java</li>
<li>any JVM language</li>
</ul>

<p><a href="http://techblog.netflix.com/2013/06/announcing-zuul-edge-service-in-cloud.html">http://techblog.netflix.com/2013/06/announcing-zuul-edge-service-in-cloud.html</a></p>

</div><div class="slide" id="slide21"><h2 id="toc_20">How Netflix uses Zuul</h2>

<ul>
<li>Authentication</li>
<li>Insights</li>
<li>Stress Testing</li>
<li>Canary Testing</li>
<li>Dynamic Routing</li>
<li>Service Migration</li>
<li>Load Shedding</li>
<li>Security</li>
<li>Static Response handling</li>
<li>Active/Active traffic management</li>
</ul>

</div><div class="slide" id="slide22"><h2 id="toc_21">Spring Cloud Security</h2>

<ul>
<li><code>@EnableOAuth2Sso</code>: Enable Single Sign On (SSO) with an OAuth2 provider declared in external properties.</li>
<li><code>@EnableOAuth2Resource</code>: Enable security using OAuth2 access tokens</li>
</ul>

</div><div class="slide" id="slide23"><h2 id="toc_22">Spring Cloud Bus</h2>

<ul>
<li>Distributed actuator</li>
<li>/bus/env and /bus/refresh</li>
<li>uses Spring Messaging and Spring Integration</li>
</ul>

</div><div class="slide" id="slide24"><h2 id="toc_23">No soup for you!</h2>

<p><img src="images/nojava.png" alt="nojava"></p>

</div><div class="slide" id="slide25"><h2 id="toc_24">Spring Cloud Sidecar</h2>

<style>img[alt=sidecar] { width: 50%; float: right; }</style>

<p><img src="images/Vespa_sidecar.png" alt="sidecar"></p>

<ul>
<li>For you non-java apps</li>
<li>Modeled after Netflix Prana</li>
<li>Built in zuul proxy</li>
</ul>

<p><a href="http://techblog.netflix.com/2014/11/prana-sidecar-for-your-netflix-paas.html">http://techblog.netflix.com/2014/11/prana-sidecar-for-your-netflix-paas.html</a></p>

</div><div class="slide" id="slide26"><h2 id="toc_25">Spring Cloud Future</h2>

<p><em>Previews, experiments or ideas</em> (ie: <strong>no guarantees!</strong>)</p>

<ul>
<li>Distributed Locks, Leader election</li>
<li>Consul: Config, Discovery, Bus, Locks</li>
<li>Zookeeper or etcd: Locks, Leader Election, Discovery, Config</li>
<li>Zipkin for distributed tracing</li>
<li>Moar Bus! Moar Messaging!</li>
</ul>

</div><div class="slide" id="slide27"><h2 id="toc_26">Continuous Delivery</h2>

<ul>
<li>Microservices lend themselves to continuous delivery.</li>
<li>You actually <em>need</em> continuous delivery to extract maximum value.</li>
<li><strong>New:</strong> ALM support in Cloudfoundry from Cloudbees</li>
</ul>

</div><div class="slide" id="slide28"><h2 id="toc_27">Cloudfoundry</h2>

<ul>
<li>Environment Provisioning</li>
<li>On-Demand/Automatic Scaling</li>
<li>Failover/Resilience</li>
<li>Routing/Front-end Load Balancing</li>
<li>Monitoring</li>
</ul>

<p>Deploying services needs to be simple and reproducible</p>
<div class="highlight"><pre><code class="text language-text" data-lang="text">$ cf push app.groovy
</code></pre></div>
<p>and you don&#39;t get much more convenient than that.</p>

<p>(Same argument for other PaaS solutions)</p>

</div><div class="slide" id="slide29"><h2 id="toc_28">Micro vs Monolithic... is NOT new</h2>
<div class="highlight"><pre><code class="text language-text" data-lang="text">From:         kt4@prism.gatech.EDU (Ken Thompson)
Subject:      Re: LINUX is obsolete
Date:         3 Feb 92 23:07:54 GMT
Organization: Georgia Institute of Technology

I would generally agree that microkernels are probably the wave
of the future. However, it is in my opinion easier to implement
a monolithic kernel. It is also easier for it to turn into a
mess in a hurry as it is modified.

Regards, Ken
</code></pre></div>
<p><img src="images/mono-vs-micro-os.svg" alt="mono-vs-micro-os"></p>

</div><div class="slide" id="slide30"><h2 id="toc_29">What&#39;s wrong with a monolith?</h2>

<p><img src="images/monolith.jpg" alt="monolith"></p>

</div><div class="slide" id="slide31"><h2 id="toc_30">Links</h2>

<ul>
<li><a href="http://github.com/spring-cloud">http://github.com/spring-cloud</a></li>
<li><a href="http://github.com/spring-cloud-samples">http://github.com/spring-cloud-samples</a></li>
<li><a href="http://blog.spring.io">http://blog.spring.io</a></li>
<li><a href="http://presos.dsyer.com/decks/spring-cloud.html">http://presos.dsyer.com/decks/spring-cloud.html</a></li>
<li>Twitter: <a href="http://twitter.com/spencerbgibb">@spencerbgibb</a>, <a href="http://twitter.com/david_syer">@david_syer</a></li>
<li>Email: <a href="mailto:sgibb@pivotal.io">sgibb@pivotal.io</a>, <a href="mailto:dsyer@pivotal.io">dsyer@pivotal.io</a></li>
</ul>

</div><div class="slide" id="slide32"><h2 id="toc_31">Notes</h2>

<ul>
<li><a href="https://speakerdeck.com/mstine/architecting-for-continuous-delivery-microservices-with-pivotal-cf-and-spring-cloud">https://speakerdeck.com/mstine/architecting-for-continuous-delivery-microservices-with-pivotal-cf-and-spring-cloud</a></li>
<li><a href="http://www.slideshare.net/ewolff/micro-services-small-is-beautiful">http://www.slideshare.net/ewolff/micro-services-small-is-beautiful</a></li>
<li><a href="http://martinfowler.com/articles/microservices.html">http://martinfowler.com/articles/microservices.html</a></li>
<li><a href="http://davidmorgantini.blogspot.com/2013/08/micro-services-what-are-micro-services.html">http://davidmorgantini.blogspot.com/2013/08/micro-services-what-are-micro-services.html</a></li>
<li>Book (Humble and Farley): <a href="http://continuousdelivery.com/">http://continuousdelivery.com</a></li>
<li>Netflix Blog: <a href="http://techblog.netflix.com/2013/08/deploying-netflix-api.html">http://techblog.netflix.com/2013/08/deploying-netflix-api.html</a></li>
<li><a href="http://goo.gl/M159zi">Mikey Cohen Netflix edge architecture, http://goo.gl/M159zi</a></li>
<li>Release It!: <a href="https://pragprog.com/book/mnee/release-it">https://pragprog.com/book/mnee/release-it</a></li>
</ul>
</div>


<a href="#" class="deck-prev-link" title="Previous">&#8592;</a>
<a href="#" class="deck-next-link" title="Next">&#8594;</a>

<p id="footer" class="deck-status">
	<span class="deck-status-current"></span>/<span class="deck-status-total"></span>
</p>

<form action="." method="get" class="goto-form">
	<label for="goto-slide">Go to slide:</label>
	<input type="number" name="slidenum" id="goto-slide">
	<input type="submit" value="Go">
</form>

<a href="." title="Permalink to this slide" class="deck-permalink">#</a>

<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.6.1/jquery.js"></script>
<script>window.jQuery || document.write('<script src="../deck.js/jquery.min.js"><\/script>')</script>

<!-- Deck Core and extensions -->
<script src="../deck.js/core/deck.core.js"></script>
<script src="../deck.js/extensions/menu/deck.menu.js"></script>
<script src="../deck.js/extensions/goto/deck.goto.js"></script>
<script src="../deck.js/extensions/status/deck.status.js"></script>
<script src="../deck.js/extensions/navigation/deck.navigation.js"></script>
<script src="../deck.js/extensions/hash/deck.hash.js"></script>

<script type="text/javascript">
$(function() {
	// Deck initialization
	$.deck('.slide');
	
	$('#style-themes').change(function() {
		$('#style-theme-link').attr('href', $(this).val());
	});
	
	$('#transition-themes').change(function() {
		$('#transition-theme-link').attr('href', $(this).val());
	});

    $('pre').click(function (){
	$(this).toggleClass('highlighted');
    });
});
</script>

</body>
</html>
